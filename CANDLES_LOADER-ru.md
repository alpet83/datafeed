  ### DRAFT DOCUMENT
  В текущей реализации доступно скачивание свечей для бирж Bitfinex и BitMEX. После инциализации всех БД (MySQL, ClickHouse), можно запустить загрузку выполнив b*x_candles_dl.php (предварительно потребуется chmod +x). Рекомендуется создавать под загрузчики отдельного пользователя в Linux. Во время работы основное журналирование ведется в папку logs/ - с раскраской сообщений как в скриншоте bitmex_candles_log.png. Мониторить соответственно работу можно через оболочку BASH/SH, командой tail -f logs/*candle*.log  
  
  Процесс загрузки данных является блочно-итеративным. Скрипт пытается загрузить для каждой настроенной торговой пары один или несколько блоков данных за цикл. В текущей реализации на один блок приходится суточный объем данных. При инициализации списка блоков проводятся проверки уже загруженных данных, сравниваются с предварительно загруженным набором дневных свечей. Условием повторной загрузки является расхождение по объему или несоответствие цены закрытия последней минутки и соответствующего блока/дня. Если такое несоответствие остается, через несколько попыток в таблице stats__(tickername) счетчик достигает запретительного уровня, и дальше скрипт уже не пытается. К сожалению на сегодня у биржи Bitfinex едва-ли не все минутные свечи имеют прореженную историю, а полная история начинается с 5-минутного интервала. Предполагается в дальнейшем реализация регенератора минутных свечей из тиков, но их полную историю загрузить целая эпопея.
  После того как получится добиться стабильной работы скрипта, его можно добавить в расписание cron на начало каждого часа.
  
  
  